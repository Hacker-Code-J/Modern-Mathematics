% pdflatex -shell-escape software-analysis-main.tex
\documentclass[12pt,openany]{book}

\input{preambles/packages}
\input{preambles/theorem}
\input{preambles/layout}
\input{preambles/tcolorbox}
\input{preambles/tikz}
\input{preambles/algorithm}
\input{preambles/listing}
\input{preambles/commands}

% ---------- Notation ----------
\newcommand{\CP}{\mathbb{CP}}
\newcommand{\M}{\mathcal{M}}

%\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Ab}{\mathsf{Ab}}
\newcommand{\Mod}{\mathsf{Mod}}
\newcommand{\GL}{\operatorname{GL}}
\newcommand{\im}{\operatorname{im}}
\newcommand{\Ker}{\operatorname{Ker}}
\newcommand{\coker}{\operatorname{coker}}
\newcommand{\Hom}{\operatorname{Hom}}
\newcommand{\kk}{\Bbbk}
%\newcommand{\Z}{\mathbb{Z}}
%\newcommand{\im}{\operatorname{im}}
\newcommand{\rank}{\operatorname{rank}}
\newcommand{\nullity}{\operatorname{nullity}}
%\newcommand{\id}{\mathrm{id}}

\newcommand{\Om}{\Omega}
\newcommand{\dd}{\,\mathrm{d}}
\newcommand{\res}{\!\mid}
\newcommand{\dR}{\mathrm{dR}}
%\DeclareMathOperator{\im}{im}
%\DeclareMathOperator{\Ker}{Ker}
 \newcommand{\grad}{\nabla}
 \newcommand{\diver}{\operatorname{div}}
 \newcommand{\curl}{\operatorname{curl}}
 \newcommand{\flatop}{\flat}   % use v^\flat
 \newcommand{\sharpop}{\sharp} % use \alpha^\sharp
 \newcommand{\vol}{\operatorname{vol}}
 \newcommand{\X}{\mathfrak{X}(\mathbb{R}^3)}

\renewcommand{\emph}[1]{\textbf{#1}}

\begin{document}
\input{rc-titlepage}
\tableofcontents
\newpage

\chapter{De Rham Complex, Short Exact Sequence, and Mayer-Vietoris}
\section{Grad / Curl / Div}

On $M=\R^3$ (with its standard Euclidean metric and orientation), the exterior derivative
packages the familiar vector calculus operators:

\begin{table}[h]
	\centering
	\renewcommand{\arraystretch}{1.35}
	\setlength{\tabcolsep}{10pt}
	\begin{tabular}{
		@{}>{\raggedright\arraybackslash}p{0.09\linewidth} |
		>{\raggedright\arraybackslash}p{0.225\linewidth} |
		>{\raggedright\arraybackslash}p{0.39\linewidth} |
		>{\raggedright\arraybackslash}p{0.225\linewidth}@{}
		}
		\toprule
		\textbf{Degree} & \textbf{Differential Form} & \textbf{Exterior derivative $d$} & \textbf{Vector calculus} \\
		\midrule
		\multirow{2}{*}{$0$-forms} &
		$f\in \Omega^0(\R^3)$ &
		$d:\Omega^0(\R^3)\to \Omega^1(\R^3),$
		& Gradient \\
		& (scalar field) & $df=f_x\,dx+f_y\,dy+f_z\,dz$
		& $df \;\leftrightarrow\; \nabla f$ \\ \hline
%		\addlinespace
		\multirow{2}{*}{$1$-forms} &
		$\alpha\in \Omega^1(\R^3)$, &
		$d:\Omega^1(\R^3)\to \Omega^2(\R^3),$ &
		Curl (via Hodge star)\\
		& $\alpha=P\,dx+Q\,dy+R\,dz$ 
		& $d\alpha=
		\Big(R_y-Q_z\Big)\,dy\wedge dz
		+\Big(P_z-R_x\Big)\,dz\wedge dx
		+\Big(Q_x-P_y\Big)\,dx\wedge dy$
		& $d\alpha \;\leftrightarrow\; \nabla\times (P,Q,R)$ \\ \hline
%		\addlinespace
		\multirow{2}{*}{$2$-forms} &
		$\beta\in \Omega^2(\R^3)$, &
		$d:\Omega^2(\R^3)\to \Omega^3(\R^3),$
		&
		Divergence
		\\
		& $\beta=A\,dy\wedge dz+B\,dz\wedge dx+C\,dx\wedge dy$ 
		& $d\beta=\big(A_x+B_y+C_z\big)\,dx\wedge dy\wedge dz$
		& $d\beta \;\leftrightarrow\; \nabla\cdot (A,B,C)$\\
		\bottomrule
	\end{tabular}
	\caption{On $\R^3$ (with Euclidean metric and orientation), the exterior derivative packages grad/curl/div (using the Hodge star to identify $2$-forms with vector fields).}
\end{table}

\begin{itemize}
	\item \textbf{Functions} $f\in\Om^0(\R^3)$ correspond to scalar fields.
	The map
	\[
	d:\Om^0(\R^3)\to \Om^1(\R^3)
	\]
	corresponds to the \textbf{gradient}:
	if $f=f(x,y,z)$ then
	\[
	df = \frac{\partial f}{\partial x}\,dx+\frac{\partial f}{\partial y}\,dy+\frac{\partial f}{\partial z}\,dz.
	\]
	Viewing $1$-forms as vector fields via the Euclidean metric, $df$ corresponds to $\nabla f$.
	
	\item \textbf{1-forms} $\alpha\in\Om^1(\R^3)$ correspond (after identifying $1$-forms with vector
	fields) to vector fields $\mathbf{F}=(P,Q,R)$ via
	\[
	\alpha = P\,dx + Q\,dy + R\,dz.
	\]
	Then
	\[
	d:\Om^1(\R^3)\to \Om^2(\R^3)
	\]
	corresponds to \textbf{curl}. Indeed,
	\[
	d\alpha
	= \left(\frac{\partial R}{\partial y}-\frac{\partial Q}{\partial z}\right)\,dy\wedge dz
	+ \left(\frac{\partial P}{\partial z}-\frac{\partial R}{\partial x}\right)\,dz\wedge dx
	+ \left(\frac{\partial Q}{\partial x}-\frac{\partial P}{\partial y}\right)\,dx\wedge dy,
	\]
	and (using the Hodge star to identify $2$-forms with vector fields) this corresponds to
	$\nabla\times \mathbf{F}$.
	
	\item \textbf{2-forms} $\beta\in\Om^2(\R^3)$ correspond (via the Hodge star) to vector fields
	$\mathbf{G}=(A,B,C)$ by writing
	\[
	\beta = A\,dy\wedge dz + B\,dz\wedge dx + C\,dx\wedge dy.
	\]
	Then
	\[
	d:\Om^2(\R^3)\to \Om^3(\R^3)
	\]
	corresponds to \textbf{divergence}:
	\[
	d\beta = \left(\frac{\partial A}{\partial x}+\frac{\partial B}{\partial y}+\frac{\partial C}{\partial z}\right)\,dx\wedge dy\wedge dz,
	\]
	which corresponds to $\nabla\cdot \mathbf{G}$.
\end{itemize}

\begin{table}[h]
	\centering
	\renewcommand{\arraystretch}{1.35}
	\setlength{\tabcolsep}{10pt}
	\begin{tabular}{
			@{}>{\raggedright\arraybackslash}p{0.125\linewidth} |
			>{\raggedright\arraybackslash}p{0.36\linewidth}
			>{\raggedright\arraybackslash}p{0.40\linewidth}@{}}
		\toprule
		\textbf{Operator} & \textbf{Differential form side} & \textbf{Vector field side (via $\flat,\sharp, *$)} \\
		\midrule
		Gradient &
		For $f\in C^\infty(\R^3)=\Omega^0(\R^3)$,
		\[
		df\in \Omega^1(\R^3)
		\]
		&
		Define $\grad f\in \mathfrak{X}(\R^3)$ by
		\[
		(\grad f)^\flat = df,\qquad
		\grad f = (df)^\sharp.
		\]
		\\
		\addlinespace
		Curl &
		For a vector field $X\in \mathfrak{X}(\R^3)$ with $1$-form $X^\flat\in\Omega^1(\R^3)$,
		\[
		d(X^\flat)\in \Omega^2(\R^3)
		\]
		&
		Define $\curl X\in \mathfrak{X}(\R^3)$ by
		\[
		(\curl X)^\flat = *\,d(X^\flat),\qquad
		\curl X = \big(*\,d(X^\flat)\big)^\sharp.
		\]
		\\
		\addlinespace
		Divergence &
		For a vector field $X\in \mathfrak{X}(\R^3)$,
		consider the $2$-form $*X^\flat\in\Omega^2(\R^3)$ and its derivative
		\[
		d(*X^\flat)\in\Omega^3(\R^3)
		\]
		&
		Let $\vol$ be the Euclidean volume form. Define $\diver X\in C^\infty(\R^3)$ by
		\[
		d(*X^\flat) = (\diver X)\,\vol,\quad
		\diver X = *\,d(*X^\flat).
		\]
		\\
		\bottomrule
	\end{tabular}
	\caption{Coordinate-free grad/curl/div on $(\R^3,g)$ using musical isomorphisms $\flat,\sharp$ and the Hodge star $*$.}
\end{table}

% ------------------------------------------------------------
% (Optional) one-line identities showing d^2=0 becomes curl grad=0, div curl=0
% ------------------------------------------------------------
\[
\curl(\grad f)
= \big(*\,d((df)^\sharp{}^\flat)\big)^\sharp
= \big(*\,d(df)\big)^\sharp = 0,
\qquad
\diver(\curl X)
= *\,d\big(*(\curl X)^\flat\big)
= *\,d\big(*(*\,d(X^\flat))\big)=0,
\]
where we used $d^2=0$ and $*^2=\pm 1$ on forms in dimension $3$.

%\subsection*{Why $d\circ d=0$ matches ``curl grad = 0'' and ``div curl = 0''}
The cochain condition $d^{k+1}\circ d^k=0$ becomes, under the above identifications,
\[
\nabla\times(\nabla f)=0
\qquad\text{and}\qquad
\nabla\cdot(\nabla\times \mathbf{F})=0.
\]
In general, the de Rham complex is the coordinate-free framework that explains these
vector calculus identities.

\subsection*{Cohomology as ``obstructions to being a gradient/curl''}
In $\R^3$, ``closed'' and ``exact'' specialize as follows:
\begin{itemize}
	\item A $1$-form $\alpha$ is \textbf{closed} iff $d\alpha=0$, i.e.\ $\nabla\times\mathbf{F}=0$
	(irrotational field). It is \textbf{exact} iff $\alpha=df$, i.e.\ $\mathbf{F}=\nabla f$.
	Thus $H^1_{\dR}$ measures irrotational fields that are not global gradients.
	\item A $2$-form $\beta$ is \textbf{closed} iff $d\beta=0$, i.e.\ $\nabla\cdot\mathbf{G}=0$
	(sourceless field). It is \textbf{exact} iff $\beta=d\alpha$, i.e.\ $\mathbf{G}=\nabla\times\mathbf{F}$.
	Thus $H^2_{\dR}$ measures divergence-free fields that are not global curls.
\end{itemize}
On contractible domains (like $\R^3$), the Poincar\'e lemma implies these obstructions vanish:
$H^k_{\dR}(\R^3)=0$ for $k\ge 1$.

\begin{figure}[h]
% ------------------------------------------------------------
% 1) The "big picture" correspondence diagram
% ------------------------------------------------------------
\[
\begin{tikzcd}[column sep=huge,row sep=large]
	\Om^0(\mathbb{R}^3)
	\arrow[r,"d"]
	&
	\Om^1(\mathbb{R}^3)
	\arrow[r,"d"]
	&
	\Om^2(\mathbb{R}^3)
	\arrow[r,"d"]
	&
	\Om^3(\mathbb{R}^3)
	\\
	C^\infty(\mathbb{R}^3)
	\arrow[u,equal]
	\arrow[r,"\grad"']
	&
	\X
	\arrow[u,"\flat"',shift right=0.8ex]
	\arrow[u,"\sharp",shift left=0.8ex]
	\arrow[r,"\curl"']
	&
	\X
	\arrow[u, "{(*\,\cdot)^\flat}"', shift right=0.8ex]
	\arrow[u, "{(*\,\cdot)^\sharp}",  shift left=0.8ex]
	\arrow[r,"\diver"']
	&
	C^\infty(\mathbb{R}^3)
	\arrow[u,"*^{-1}= \pm *"']
\end{tikzcd}
\]
\caption{Vector calculus operators as conjugates of $d$ via $\flat,\sharp,*$ in $\mathbb{R}^3$.}
\end{figure}

\vspace{1em}

% ------------------------------------------------------------
% 2) curl = ( * d (·)^flat )^sharp and curl(grad f)=0
% ------------------------------------------------------------
\[
\begin{tikzcd}[column sep=huge,row sep=large]
C^\infty(\mathbb{R}^3)
\arrow[r,"\grad"]
\arrow[d,equal]
&
\X
\arrow[r,"\curl"]
\arrow[d,"\flat"']
&
\X
\arrow[d,"\flat"']
\\
\Om^0(\mathbb{R}^3)
\arrow[r,"d"']
&
\Om^1(\mathbb{R}^3)
\arrow[r,"{*\,d}"']
&
\Om^1(\mathbb{R}^3)
\end{tikzcd}
\qquad\Rightarrow\qquad
\curl(\grad f)
= \big(*\,d(df)\big)^\sharp
= \big(*\,d^2 f\big)^\sharp
=0.
\]

\vspace{1em}

% ------------------------------------------------------------
% 3) div = * d * (·)^flat and div(curl X)=0
% ------------------------------------------------------------
\[
\begin{tikzcd}[column sep=huge,row sep=large]
\X
\arrow[r,"\curl"]
\arrow[d,"\flat"']
&
\X
\arrow[r,"\diver"]
\arrow[d,"\flat"']
&
C^\infty(\mathbb{R}^3)
\arrow[d,equal]
\\
\Om^1(\mathbb{R}^3)
\arrow[r,"d"']
&
\Om^2(\mathbb{R}^3)
\arrow[r,"{d}"']
&
\Om^3(\mathbb{R}^3)
\end{tikzcd}
\qquad\text{with}\qquad
\curl X = \big(*\,d(X^\flat)\big)^\sharp,\quad
\diver Y = *\,d\big(*\,Y^\flat\big).
\]
\[
\Rightarrow\quad
\diver(\curl X)
= *\,d\Big(*(\curl X)^\flat\Big)
= *\,d\Big(*(*\,d(X^\flat))\Big)
= \pm *\,d(d(X^\flat))
=0,
\]
where the sign comes from $*^2=\pm 1$ on $k$-forms in dimension $3$ (in Euclidean $\mathbb{R}^3$, $*^2=+1$ for all $k$).



\newpage
\section*{de Rham Cohomology}
\defbox[Cochain Complex]{
Let $M$ be a smooth manifold. A \emph{cochain complex} $(C^\bullet, d^\bullet)$ in $\R$-vector spaces consists of
\begin{itemize}
	\item $\R$-vector spaces $C^k$ for each $k\in\mathbb{Z}$,
	\item $\R$-linear maps (coboundary maps) $d^k: C^k \to C^{k+1}$,
\end{itemize}
such that $d^{k+1}\circ d^k = 0$ for all $k$.
}

\defbox[de Rham cochain complex]{
For a smooth manifold $M$, the de Rham cochain complex $(\Om^\bullet(M), d)$ is
\[
0 \to \Om^0(M) \xrightarrow{d} \Om^1(M) \xrightarrow{d} \Om^2(M) \xrightarrow{d} \cdots,
%\qquad d\circ d=0,
\] where \begin{itemize}
	\item $\Om^k(M)$ is the $\R$-vector space of smooth differential $k$-forms on $M$.
	\item $d^k := d:\Om^k(M)\to \Om^{k+1}(M)$ is the exterior derivative such that \[
	d^{k+1}\circ d^k = 0 \quad\text{for all } k\ge 0.
	\]
\end{itemize}
}

\subsection*{The de Rham complex as a cochain complex}
For a smooth manifold $M$, the de Rham cochain complex is
\[
0 \to \Om^0(M) \xrightarrow{d} \Om^1(M) \xrightarrow{d} \Om^2(M) \xrightarrow{d} \cdots,
\qquad d\circ d=0.
\]
In $\R^3$ (with a metric), $d$ corresponds to grad/curl/div after identifying vector fields with differential forms via the Hodge star.

\subsection*{De Rham cohomology}
\[
H^k_{\mathrm{dR}}(M)
:= \frac{Z^k(M)}{B^k(M)}
= \frac{\ker(d:\Om^k(M)\to \Om^{k+1}(M))}{\mathrm{im}(d:\Om^{k-1}(M)\to \Om^{k}(M))}.
\]
This measures global obstructions to writing a closed form as $d(\text{potential})$.

\subsection*{Short exact sequence (SES) of complexes for a cover $M=U\cup V$}
For each $k$ define
\[
\alpha^k:\Om^k(M)\to \Om^k(U)\oplus\Om^k(V),\quad \alpha^k(\omega)=(\omega\res_U,\omega\res_V),
\]
\[
\beta^k:\Om^k(U)\oplus\Om^k(V)\to \Om^k(U\cap V),\quad \beta^k(\eta,\theta)=\eta\res_{U\cap V}-\theta\res_{U\cap V}.
\]
Then (for smooth manifolds) one has a short exact sequence
\[
0\to \Om^k(M)\xrightarrow{\alpha^k}\Om^k(U)\oplus\Om^k(V)\xrightarrow{\beta^k}\Om^k(U\cap V)\to 0.
\]
Middle exactness $\mathrm{im}(\alpha^k)=\ker(\beta^k)$ is the gluing property (sheaf property); surjectivity of $\beta^k$ uses partition of unity.
Since $d$ commutes with restriction, these assemble into an SES of cochain complexes:
\[
0\to \Om^*(M)\xrightarrow{\alpha}\Om^*(U)\oplus\Om^*(V)\xrightarrow{\beta}\Om^*(U\cap V)\to 0.
\]

\subsection*{Mayer--Vietoris long exact sequence}
Any SES of cochain complexes yields a long exact sequence in cohomology:
\[
\cdots \to H^{k-1}(U\cap V)\xrightarrow{\delta} H^k(M)
\to H^k(U)\oplus H^k(V)\to H^k(U\cap V)\xrightarrow{\delta} H^{k+1}(M)\to \cdots
\]
The connecting map $\delta$ may be written explicitly using a partition of unity $\rho_U+\rho_V=1$:
for $d\eta=0$ on $U\cap V$,
\[
\delta([\eta])=\big[\,d(\rho_V\eta)\,\big]=\big[\,d\rho_V\wedge \eta\,\big]\in H^k(M).
\]

\bigskip
\begin{center}
	\begin{tikzcd}[column sep=large]
		0 \arrow[r] &
		\Om^*(M) \arrow[r,"\alpha"] &
		\Om^*(U)\oplus \Om^*(V) \arrow[r,"\beta"] &
		\Om^*(U\cap V) \arrow[r] & 0
	\end{tikzcd}
\end{center}

\newpage
\section{Example: The circle $S^1$}
\subsection{Cover and overlap}
Let \[
U=S^1\setminus\{(-1,0)\},\qquad V=S^1\setminus\{(1,0)\}.
\] Then $U,V$ are contractible; $U\cap V$ has two connected components $A$ (upper arc) and $B$ (lower arc).

\begin{center}
	\begin{tikzpicture}[scale=2.2, line cap=round, line join=round]
		% circle
		\draw[thick] (0,0) circle (1);
		% removed points
		\fill (-1,0) circle (0.03) node[left] {$(-1,0)$};
		\fill ( 1,0) circle (0.03) node[right] {$(1,0)$};
		
		% arcs highlighting overlap components (schematic)
		\draw[very thick, decoration={markings, mark=at position 0.5 with {\arrow{Stealth}}}, postaction={decorate}]
		(-1,0) arc[start angle=180, end angle=0, radius=1] node[pos=0.5, above=6pt] {$A\subset U\cap V$};
		\draw[very thick, decoration={markings, mark=at position 0.5 with {\arrow{Stealth}}}, postaction={decorate}]
		( 1,0) arc[start angle=0, end angle=-180, radius=1] node[pos=0.5, below=6pt] {$B\subset U\cap V$};
		
		% labels for U and V
		\node at (-0.1, 1.25) {$U=S^1\setminus\{(-1,0)\}$};
		\node at ( 0.1,-1.25) {$V=S^1\setminus\{(1,0)\}$};
	\end{tikzpicture}
\end{center}



\section*{Why stereographic charts? A detailed explanation on $S^1$}

\subsection*{1. Goal: exhibit $U,V$ as coordinate domains}
Let
\[
S^1=\{(x,y)\in\mathbb R^2\mid x^2+y^2=1\},
\qquad
U=S^1\setminus\{(-1,0)\},
\qquad
V=S^1\setminus\{(1,0)\}.
\]
A \emph{(smooth) chart} on the $1$--manifold $S^1$ is a pair $(U,\varphi)$ where
\[
\varphi:U\longrightarrow \widetilde U\subset\mathbb R
\]
is a homeomorphism (indeed, a diffeomorphism in the smooth category) onto an open set
$\widetilde U\subset \mathbb R$.

Since removing one point from a circle ``cuts it open'', we expect $U$ and $V$ to be
diffeomorphic to $\mathbb R$. Stereographic projection gives an explicit, canonical
diffeomorphism
\[
U \xrightarrow{\;\;\varphi\;\;} \mathbb R,
\qquad
V \xrightarrow{\;\;\psi\;\;} \mathbb R,
\]
with a very simple transition map on $U\cap V$.

\subsection*{2. Geometric definition of stereographic projection on $S^1$}
Fix the vertical line
\[
L=\{(0,t)\in\mathbb R^2\mid t\in\mathbb R\}\cong \mathbb R,
\qquad (0,t)\leftrightarrow t.
\]
\begin{itemize}
	\item \textbf{Chart on $U$.} For $p=(x,y)\in U$, draw the straight line through the \emph{deleted}
	point $(-1,0)$ and $p$, and let it intersect $L$. The $t$--coordinate of the intersection
	is defined to be $\varphi(p)$.
	
	\item \textbf{Chart on $V$.} For $p=(x,y)\in V$, draw the straight line through the \emph{deleted}
	point $(1,0)$ and $p$, intersect with $L$, and define its $t$--coordinate to be $\psi(p)$.
\end{itemize}

This is called \emph{stereographic projection} (here, from the missing point onto the line $L$).

\subsection*{3. Derivation of the explicit formula for $\varphi$ on $U$}
Take a point $(x,y)\in S^1$ with $(x,y)\neq (-1,0)$.
Consider the line through $(-1,0)$ and $(x,y)$:
\[
\ell(\lambda)=(-1,0)+\lambda\big((x,y)-(-1,0)\big)
=(-1,0)+\lambda(x+1,\,y)
=\big(-1+\lambda(x+1),\ \lambda y\big).
\]
We find the intersection with $L$ by imposing $x$--coordinate $=0$:
\[
-1+\lambda(x+1)=0
\quad\Longrightarrow\quad
\lambda=\frac{1}{x+1}.
\]
Then the $y$--coordinate of the intersection point is
\[
\lambda y=\frac{y}{x+1}.
\]
Identifying $L\cong\mathbb R$ by $(0,t)\leftrightarrow t$, we obtain the chart map
\[
\boxed{
	\varphi:U\to\mathbb R,
	\qquad
	\varphi(x,y)=\frac{y}{1+x}.
}
\]
Note that $\varphi$ is well-defined on $U$ because $1+x\neq 0$ precisely when $(x,y)\neq (-1,0)$.

\subsection*{4. Derivation of the explicit formula for $\psi$ on $V$}
Similarly, for $(x,y)\in V$ consider the line through $(1,0)$ and $(x,y)$:
\[
\ell(\lambda)=(1,0)+\lambda\big((x,y)-(1,0)\big)
=(1,0)+\lambda(x-1,\,y)
=\big(1+\lambda(x-1),\ \lambda y\big).
\]
Intersect with $L$ by setting the $x$--coordinate equal to $0$:
\[
1+\lambda(x-1)=0
\quad\Longrightarrow\quad
\lambda=-\frac{1}{x-1}=\frac{1}{1-x}.
\]
Hence the $y$--coordinate of the intersection is
\[
\lambda y=\frac{y}{1-x}.
\]
Thus
\[
\boxed{
	\psi:V\to\mathbb R,
	\qquad
	\psi(x,y)=\frac{y}{1-x}.
}
\]
This is well-defined on $V$ because $1-x\neq 0$ precisely when $(x,y)\neq (1,0)$.

\subsection*{5. Showing $\varphi$ is a diffeomorphism (by writing an inverse)}
Let $t\in\mathbb R$. We solve for $(x,y)\in S^1$ such that
\[
t=\varphi(x,y)=\frac{y}{1+x}.
\]
This gives $y=t(1+x)$. Impose the circle equation $x^2+y^2=1$:
\[
x^2+t^2(1+x)^2=1.
\]
Expand and collect terms:
\



\newpage
\subsection*{(B) MV computation of $H^*(S^1)$}
Since $U,V$ are contractible,
\[
H^0(U)\cong H^0(V)\cong \R,\qquad H^1(U)=H^1(V)=0.
\]
Since $U\cap V=A\sqcup B$ has two components,
\[
H^0(U\cap V)\cong \R\oplus \R,\qquad H^1(U\cap V)=0.
\]
The relevant MV segment is
\[
0\to H^0(S^1)\to H^0(U)\oplus H^0(V)\to H^0(U\cap V)\xrightarrow{\delta} H^1(S^1)\to 0.
\]
The map $H^0(U)\oplus H^0(V)\to H^0(U\cap V)$ sends $(a,b)\mapsto (a-b,a-b)$, whose image is the diagonal.
Hence
\[
H^0(S^1)\cong \R,\qquad H^1(S^1)\cong (\R\oplus\R)/\Delta \cong \R.
\]

\subsection*{(C) Generator and FTLI (grad) obstruction}
Choose local angle branches $\theta_U$ on $U$ and $\theta_V$ on $V$. Then
$d\theta_U=d\theta_V$ on $U\cap V$, hence they glue to a global $1$-form $d\theta$ on $S^1$.
Its period is
\[
\int_{S^1} d\theta = 2\pi \neq 0,
\]
so $d\theta$ cannot be exact ($\int_\gamma df=0$ for any loop $\gamma$ by the fundamental theorem of line integrals).
Thus $[d\theta]$ generates $H^1(S^1)\cong \R$.

\begin{center}
	\begin{tikzcd}[column sep=large]
		0 \arrow[r] &
		H^0(S^1) \arrow[r] &
		H^0(U)\oplus H^0(V) \arrow[r] &
		H^0(U\cap V) \arrow[r,"\delta"] &
		H^1(S^1) \arrow[r] & 0
	\end{tikzcd}
\end{center}

\newpage
\section*{2. The sphere $S^2\simeq \mathbb{CP}^1$}

\subsection*{(A) Cover and overlap}
Let
\[
U_N=S^2\setminus\{\text{south pole}\},\qquad U_S=S^2\setminus\{\text{north pole}\},\qquad W=U_N\cap U_S.
\]
Then $U_N\simeq \R^2$, $U_S\simeq \R^2$, and $W\simeq S^1\times (0,1)$ (a cylinder).

\begin{center}
	\begin{tikzpicture}[scale=2.0, line cap=round, line join=round]
		% sphere drawn as circle
		\draw[thick] (0,0) circle (1);
		% poles
		\fill (0,1) circle (0.03) node[above] {north};
		\fill (0,-1) circle (0.03) node[below] {south};
		
		% labels
		\node at (-1.25, 0.6) {$U_S=S^2\setminus\{\text{north}\}$};
		\node at ( 1.25,-0.6) {$U_N=S^2\setminus\{\text{south}\}$};
		\node at (0,0) {$W=U_N\cap U_S$};
		\node at (0,0.22) {\small(cylinder)};
	\end{tikzpicture}
\end{center}

\subsection*{(B) MV computation of $H^*(S^2)$}
Contractibility of $U_N,U_S$ gives
\[
H^1(U_N)=H^1(U_S)=0,\qquad H^2(U_N)=H^2(U_S)=0.
\]
Since $W\simeq S^1\times(0,1)$, we have
\[
H^1(W)\cong \R,\qquad H^2(W)=0.
\]
The key MV segment is
\[
H^1(U_N)\oplus H^1(U_S)\to H^1(W)\xrightarrow{\delta} H^2(S^2)\to H^2(U_N)\oplus H^2(U_S),
\]
which collapses to
\[
0\to \R \xrightarrow{\delta} H^2(S^2)\to 0,
\]
hence
\[
H^0(S^2)\cong \R,\qquad H^1(S^2)=0,\qquad H^2(S^2)\cong \R.
\]

\subsection*{(C) Generator via area form and Stokes (div/curl-type) obstruction}
In spherical coordinates $(\vartheta,\varphi)$ on $W$,
\[
\Omega := \sin\vartheta\, d\vartheta\wedge d\varphi
\]
is the standard area form on $S^2$, and
\[
\int_{S^2}\Omega = 4\pi \neq 0,
\]
so $\Omega$ is not exact (if $\Omega=dA$ globally then $\int_{S^2}\Omega=\int_{S^2}dA=0$ by Stokes).

Moreover, on the two charts one has explicit local potentials
\[
A_N=(1-\cos\vartheta)\,d\varphi\ \text{ on }U_N,\qquad
A_S=-(1+\cos\vartheta)\,d\varphi\ \text{ on }U_S,
\]
satisfying $dA_N=dA_S=\Omega$. On the overlap,
\[
A_N-A_S=2\,d\varphi,
\]
and $[d\varphi]$ generates $H^1(W)\cong \R$. The connecting map sends
\[
\delta\big([2\,d\varphi]\big)=[\Omega]\in H^2(S^2).
\]

\begin{center}
	\begin{tikzcd}[column sep=large]
		0 \arrow[r] &
		H^1(W) \arrow[r,"\delta","\cong"'] &
		H^2(S^2) \arrow[r] & 0
	\end{tikzcd}
\end{center}

\newpage
\section*{3. The torus $T^2=\R^2/\Z^2$ (complex torus)}

\subsection*{(A) Global closed forms, periods, and the expected answer}
The forms $dx,dy$ descend to $T^2$ and are closed.
For the fundamental loops $\gamma_x(t)=(t,0)$ and $\gamma_y(t)=(0,t)$ (mod $\Z^2$),
\[
\int_{\gamma_x} dx = 1,\quad \int_{\gamma_y} dx = 0,\qquad
\int_{\gamma_x} dy = 0,\quad \int_{\gamma_y} dy = 1.
\]
Hence $[dx],[dy]\neq 0$ in $H^1(T^2)$ (exact 1-forms have zero periods on loops).
Also $dx\wedge dy$ is closed and
\[
\int_{T^2} dx\wedge dy = 1\neq 0,
\]
so $[dx\wedge dy]\neq 0$ in $H^2(T^2)$.
Thus one expects
\[
H^0(T^2)\cong \R,\qquad H^1(T^2)\cong \R^2\langle[dx],[dy]\rangle,\qquad H^2(T^2)\cong \R\langle[dx\wedge dy]\rangle.
\]

\subsection*{(B) MV cover that recovers these classes}
Let
\[
C_0=\{x\equiv 0 \ (\mathrm{mod}\ 1)\},\qquad C_{1/2}=\{x\equiv \tfrac12 \ (\mathrm{mod}\ 1)\},
\]
and define
\[
U:=T^2\setminus C_0,\qquad V:=T^2\setminus C_{1/2}.
\]
Then $U\simeq S^1$, $V\simeq S^1$, and $U\cap V$ is a disjoint union of two cylinders
$A\sqcup B$ (two vertical open strips in the fundamental square).

\begin{center}
	\begin{tikzpicture}[scale=3.0, line cap=round, line join=round]
		% fundamental domain
		\draw[thick] (0,0) rectangle (1,1);
		% identifications
		\node at (0.5,-0.12) {\scriptsize $y\sim y+1$};
		\node[rotate=90] at (-0.12,0.5) {\scriptsize $x\sim x+1$};
		
		% removed circles: x=0 and x=1/2
		\draw[very thick] (0,0) -- (0,1);
		\draw[very thick] (0.5,0) -- (0.5,1);
		\node[below] at (0,0) {\scriptsize $x=0$};
		\node[below] at (0.5,0) {\scriptsize $x=\tfrac12$};
		
		% overlap components A and B (schematic)
		\node at (0.25,0.5) {$A$};
		\node at (0.75,0.5) {$B$};
		
		% labels U and V
		\node[above] at (0.25,1.05) {\scriptsize $U=T^2\setminus C_0$};
		\node[above] at (0.75,1.05) {\scriptsize $V=T^2\setminus C_{1/2}$};
	\end{tikzpicture}
\end{center}

\subsection*{(C) MV segments (what they do)}
Cohomology of pieces:
\[
H^0(U)\cong H^0(V)\cong \R,\qquad H^1(U)\cong H^1(V)\cong \R,
\]
\[
H^0(U\cap V)\cong \R\oplus\R,\qquad H^1(U\cap V)\cong \R\oplus\R,\qquad H^2(U)=H^2(V)=H^2(U\cap V)=0.
\]

\paragraph{Degree 1: producing $[dx]$ and $[dy]$.}
The MV segment
\[
H^0(U\cap V)\xrightarrow{\delta} H^1(T^2)\to H^1(U)\oplus H^1(V)\to H^1(U\cap V)
\]
shows:
\begin{itemize}
	\item $\delta$ injects a copy of $\R$ (quotient of $H^0(U\cap V)$ by the diagonal) into $H^1(T^2)$; concretely it produces $[dx]$ from the ``difference of constants'' on the two components $A,B$.
	\item The kernel of $H^1(U)\oplus H^1(V)\to H^1(U\cap V)$ contributes the second independent class, represented globally by $[dy]$.
\end{itemize}
Hence $H^1(T^2)\cong \R^2$.

\paragraph{Degree 2: producing $[dx\wedge dy]$.}
The MV segment
\[
H^1(U\cap V)\xrightarrow{\delta} H^2(T^2)\to 0
\]
shows $H^2(T^2)$ is a quotient of $H^1(U\cap V)\cong \R^2$, killing the diagonal; the resulting $1$-dimensional quotient maps onto $H^2(T^2)$, and the nonzero integral
\[
\int_{T^2} dx\wedge dy = 1
\]
identifies the generator as $[dx\wedge dy]$ (up to sign).

\begin{center}
	\begin{tikzcd}[column sep=large]
		H^0(U\cap V) \arrow[r,"\delta"] &
		H^1(T^2) \arrow[r] &
		H^1(U)\oplus H^1(V) \arrow[r] &
		H^1(U\cap V)
	\end{tikzcd}
\end{center}

\begin{center}
	\begin{tikzcd}[column sep=large]
		H^1(U\cap V) \arrow[r,"\delta"] & H^2(T^2) \arrow[r] & 0
	\end{tikzcd}
\end{center}

\bigskip
\hrule
\bigskip

\section*{Quick reference: generators and ``potential'' obstructions}
\begin{itemize}
	\item $S^1$: generator $[d\theta]\in H^1(S^1)$ detected by $\int_{S^1} d\theta=2\pi$ (FTLI obstruction to being a global gradient).
	\item $S^2$: generator $[\Omega]\in H^2(S^2)$ detected by $\int_{S^2}\Omega=4\pi$ (Stokes obstruction to being $dA$ globally).
	\item $T^2$: generators $[dx],[dy]\in H^1(T^2)$ detected by loop periods; generator $[dx\wedge dy]\in H^2(T^2)$ detected by $\int_{T^2}dx\wedge dy=1$.
\end{itemize}






\chapter{Mayer–Vietoris Sequence and de Rham Cohomology}
\input{chapters/mayer-vietoris-seq-de-rham-cohomology}


\chapter{Elliptic Curve and Torus}
\section{Note 1: Meromorphic Function and Order}

\newpage
\section{Note 2: Meromorphic $f\in\C^X$ and Holomorphic $F\in(\CP^1)^X$}
Given a meromorphic $f:X\to\C$ on a Riemann surface $X$, we define \[
\fullfunction{F}{X}{\C\cup\set{\infty}(\simeq\CP^1)}{p}{F(p)=\begin{cases}
[1:f(p)] &\text{if $p$ is not a pole} \\
[0:1] &\text{if $p$ is a pole}
\end{cases}}
\]
\begin{figure}[h!]\centering
\includegraphics[scale=1]{tikzs/X_to_CP1}
\end{figure}

\medskip\noindent
In other word, \begin{figure}[h!]\centering
% https://q.uiver.app/#q=WzAsOCxbMCwwLCJYIl0sWzIsMCwiXFxtYXRoYmJ7Q30iXSxbNCwwLCJcXG1hdGhiYntDUH1eMSJdLFswLDEsInBfe1xcdGV4dHtub24tcG9sZX19Il0sWzAsMiwicV97XFx0ZXh0e3BvbGV9fSJdLFsyLDEsImYocCkiXSxbNCwxLCJbZihwKToxXSJdLFs0LDIsIlsxOjBdIl0sWzAsMSwiZiJdLFsxLDIsImkiXSxbMyw1LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzUsNiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dLFs0LDcsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Im1hcHMgdG8ifX19XV0=
\[\begin{tikzcd}
	X && {\mathbb{C}} && {\mathbb{CP}^1} \\
	{p_{\text{non-pole}}} && {f(p)} && {[z_0\;\text{:}\;z_1]=[1\;\text{:}\;z_1/z_0]=[1\;\text{:}\;f(p)]} \\
	{q_{\text{pole}}} &&&& {[0\;\text{:}\;1]=\infty}
	\arrow["f", from=1-1, to=1-3]
	\arrow["i", from=1-3, to=1-5]
	\arrow[maps to, from=2-1, to=2-3]
	\arrow[maps to, from=2-3, to=2-5]
	\arrow[maps to, from=3-1, to=3-5]
\end{tikzcd}\]
\end{figure}

\newpage
% Examples: meromorphic f and holomorphic F:X->CP^1
\subsection{Example 1: \(X = \mathbb{CP}^1\) (Riemann sphere)}
We view \(\mathbb{CP}^1\) as the Riemann sphere. On the affine chart \[
U_1 = \{[z_0:z_1]\in\mathbb{CP}^1 \mid z_1\neq 0\},
\] we use the coordinate $z = {z_0}/{z_1}.$ The point at infinity is \(\infty = [1:0]\).

On \(\mathbb{CP}^1\), a meromorphic function is the same as a rational function.
Take for instance
\[
f(z) = \frac{z^2 - 1}{z - 2}.
\]
This is meromorphic on \(\mathbb{CP}^1\), with a simple pole at \(z=2\), and (possibly) a pole at \(\infty\).

Define
\[
F:\mathbb{CP}^1\to\mathbb{CP}^1,\qquad
F(p) =
\begin{cases}
	[f(p):1], & p \text{ not a pole of } f,\\[4pt]
	[1:0], & p \text{ a pole of } f.
\end{cases}
\]

Concretely, for \(p=[z:1]\) with \(z\neq 2\),
\[
F([z:1]) = [f(z):1] = \left[\dfrac{z^2-1}{z-2}:1\right],
\]
and at the pole \(p=[2:1]\),
\[
F([2:1]) = [1:0].
\]
Similarly one checks the value at \(\infty=[1:0]\) using the behavior of \(f(z)\) as
\(|z|\to\infty\).

To see that \(F\) is holomorphic, we use the usual charts on \(\mathbb{CP}^1\):

\begin{itemize}
	\item \textbf{At a non-pole point \(p\).} Suppose \(p\) is not a pole of \(f\).
	Then \(f\) is holomorphic near \(p\) and finite there, so \(F(p)=[f(p):1]\in U_1\).
	Let
	\[
	w = \frac{z_0}{z_1}:U_1\to\mathbb{C}
	\]
	be the affine coordinate on \(U_1\). In this chart,
	\[
	(w\circ F)(q) = \frac{z_0}{z_1}\Big|_{F(q)} = f(q),
	\]
	which is holomorphic in any local coordinate around \(p\). Hence \(F\) is holomorphic at non-poles.
	
	\item \textbf{At a pole \(p\).} Let \(p\) be a pole of order \(m>0\). Choose a local
	coordinate \(z\) on \(\mathbb{CP}^1\) with \(z(p)=0\). Then
	\[
	f(z) = z^{-m} g(z),\qquad g \text{ holomorphic, } g(0)\neq 0.
	\]
	Here \(F(p)=[1:0]\). Use the chart
	\[
	U_0 = \{[z_0:z_1]\in\mathbb{CP}^1 \mid z_0\neq 0\},
	\]
	with coordinate
	\[
	u = \frac{z_1}{z_0} : U_0\to\mathbb{C}.
	\]
	For \(z\neq 0\) near \(p\),
	\[
	F(z) = [f(z):1] = [z^{-m}g(z):1].
	\]
	Multiplying homogeneous coordinates by \(z^m\) (which does not change the point in
	projective space), we get
	\[
	[z^{-m}g(z):1] = [g(z):z^m].
	\]
	Thus, in the chart \(U_0\),
	\[
	(u\circ F)(z) = \frac{z^m}{g(z)}.
	\]
	Since \(g(z)\) is holomorphic with \(g(0)\neq 0\), the function
	\(\dfrac{1}{g(z)}\) is holomorphic near \(0\), and hence
	\[
	\frac{z^m}{g(z)}
	\]
	is holomorphic near \(0\) (and vanishes to order \(m\)). Therefore \(F\) is holomorphic at the pole \(p\).
\end{itemize}

Since we have holomorphicity in local charts at every point of \(\mathbb{CP}^1\),
\(F:\mathbb{CP}^1\to\mathbb{CP}^1\) is a holomorphic map.


\bigskip
\bigskip


\subsection{Example 2: \(X = \mathbb{C}/\Lambda\) (complex torus)}

Let \(\Lambda\subset\mathbb{C}\) be a lattice and consider the complex torus
\[
X = \mathbb{C}/\Lambda.
\]
The quotient map is
\[
\pi:\mathbb{C}\to X,\qquad \pi(z) = [z].
\]

A meromorphic function \(f:X\to\mathbb{C}\) corresponds to a \(\Lambda\)-periodic
meromorphic function \(\tilde f:\mathbb{C}\to\mathbb{C}\) satisfying
\[
\tilde f(z+\lambda) = \tilde f(z),\quad \forall\,\lambda\in\Lambda,
\]
and
\[
f([z]) = \tilde f(z).
\]

A standard example is the Weierstrass \(\wp\)-function \(\wp:\mathbb{C}\to\mathbb{C}\),
which is \(\Lambda\)-periodic and meromorphic with double poles at lattice points.
Thus it descends to a meromorphic
\[
f:X\to\mathbb{C},\qquad f([z]) = \wp(z).
\]

We define
\[
F:X\to\mathbb{CP}^1,\qquad
F(p) =
\begin{cases}
	[f(p):1], & p \text{ not a pole of } f,\\[4pt]
	[1:0], & p \text{ a pole of } f.
\end{cases}
\]

For our example \(f([z])=\wp(z)\):

\begin{itemize}
	\item \(\wp(z)\) has poles precisely at lattice points \(z\in\Lambda\),
	which all represent the same point on the torus, usually denoted \([0]\).
	\item For \([z]\neq[0]\), we set \(F([z]) = [\wp(z):1]\).
	\item At \([0]\), we set \(F([0]) = [1:0]\).
\end{itemize}

\subsubsection{Local coordinate on the torus near a pole}

To get a local coordinate near \([0]\in X\), choose a small disc
\(D\subset\mathbb{C}\) around \(0\) such that
\(\pi|_D:D\to \pi(D)\) is a biholomorphism.
Then
\[
\varphi:\pi(D)\to\mathbb{C},\qquad \varphi([z]) = z,
\]
is a local coordinate on \(X\) near \([0]\).

The local behavior of \(\wp(z)\) at \(z=0\) is
\[
\wp(z) = \frac{1}{z^2} + \text{holomorphic terms},
\]
so more precisely,
\[
\wp(z) = z^{-2} g(z),\qquad g(z)\ \text{holomorphic, } g(0)\neq 0.
\]
Thus, for the induced \(f\),
\[
f([z]) = \wp(z) = z^{-2} g(z),
\]
so \(f\) has a pole of order \(m=2\) at \([0]\).

\subsubsection{Holomorphicity of \(F\) at the pole \([0]\)}

As before, we use the chart around \([1:0]\in\mathbb{CP}^1\):
\[
U_0 = \{[z_0:z_1]\mid z_0\neq 0\},\qquad
u = \frac{z_1}{z_0}:U_0\to\mathbb{C}.
\]

For \(z\neq 0\) small, we have \(p=[z]\neq[0]\) and
\[
F([z]) = [f([z]):1] = [\wp(z):1] = [z^{-2}g(z):1].
\]
Multiplying the homogeneous coordinates by \(z^2\) gives
\[
[z^{-2}g(z):1] = [g(z):z^2].
\]
So in the chart \(U_0\),
\[
(u\circ F)([z]) = \frac{z^2}{g(z)}.
\]

Since \(g(z)\) is holomorphic with \(g(0)\neq 0\), the function
\(\dfrac{1}{g(z)}\) is holomorphic near \(0\), and hence \(\dfrac{z^2}{g(z)}\)
is holomorphic near \(0\) and vanishes at \(z=0\). In the local coordinate
\(\varphi([z])=z\) on \(X\), the expression
\[
u\circ F\circ \varphi^{-1}(z) = \frac{z^2}{g(z)}
\]
is holomorphic, so \(F\) is holomorphic at the pole \([0]\).

At a non-pole point \([z_0]\in X\), the same argument as in Example~1 applies:
\(f\) is holomorphic and finite, and in the affine chart
\[
U_1 = \{[z_0:z_1]\mid z_1\neq 0\},\qquad w = \frac{z_0}{z_1},
\]
we have
\[
(w\circ F)([z]) = f([z]) = \wp(z),
\]
which is holomorphic in the local coordinate on \(X\).

\subsubsection{Conclusion}

For both examples \(X=\mathbb{CP}^1\) and \(X=\mathbb{C}/\Lambda\), the construction
\[
f:X\to\mathbb{C}\ \text{meromorphic} \quad\longmapsto\quad
F:X\to\mathbb{CP}^1,\quad
F(p)=
\begin{cases}
	[f(p):1], & p \text{ not a pole},\\[4pt]
	[1:0], & p \text{ a pole},
\end{cases}
\]
produces a holomorphic map \(F:X\to\mathbb{CP}^1\). This concretely illustrates
the general principle that a meromorphic function on a Riemann surface is the same
as a holomorphic map to \(\mathbb{CP}^1\).


\newpage
We start with a meromorphic function
\[
f:X\to\mathbb{C}
\]
on a Riemann surface \(X\), and define a map
\[
F:X\to\mathbb{CP}^1
\]
by
\[
F(p)=
\begin{cases}
	[f(p):1], & p \text{ not a pole of } f,\\[4pt]
	[1:0], & p \text{ a pole of } f.
\end{cases}
\]

You’re asking: \textbf{why is this \(F\) holomorphic as a map of Riemann surfaces?}

\bigskip

%-----------------------------------------
\section*{1. Definition to remember}

A map \(F:X\to Y\) between Riemann surfaces is \textbf{holomorphic} if, for every point
\(p\in X\), you can choose local coordinates
\begin{itemize}
	\item \(\varphi\): neighborhood of \(p\to \mathbb{C}\),
	\item \(\psi\): neighborhood of \(F(p)\to \mathbb{C}\),
\end{itemize}
such that the coordinate expression
\[
\psi \circ F \circ \varphi^{-1} : \text{(open in }\mathbb{C})\to \mathbb{C}
\]
is an ordinary holomorphic function.

So we need to check this around:
\begin{enumerate}
	\item a point where \(f\) is holomorphic (no pole),
	\item a point where \(f\) has a pole.
\end{enumerate}

\bigskip

%-----------------------------------------
\section*{2. Case 1: \(p\) is \textbf{not} a pole (easy)}

If \(p\) is not a pole, then \(f\) is holomorphic near \(p\) and finite there.

\begin{itemize}
	\item On \(X\): choose any local coordinate \(z\) with \(z(p)=0\).
	\item On \(\mathbb{CP}^1\): since \(F(p)=[f(p):1]\) has second coordinate \(\neq 0\),
	it lies in the chart
	\[
	U_1 = \{[z_0:z_1]\mid z_1\neq 0\}
	\]
	with coordinate
	\[
	w = \frac{z_0}{z_1} : U_1\to\mathbb{C}.
	\]
\end{itemize}

Then on some neighborhood of \(p\),
\[
(w\circ F)(q) = \frac{z_0}{z_1}\Big|_{F(q)}
= \frac{f(q)}{1}
= f(q),
\]
which is holomorphic in \(z\).

So \(\psi\circ F\circ\varphi^{-1} = f\) is holomorphic \(\Rightarrow F\) is holomorphic at non-pole points.

\bigskip

%-----------------------------------------
\section*{3. Case 2: \(p\) is a \textbf{pole} of order \(m>0\)}

This is the interesting part.

Let \(p\) be a pole of \(f\) of order \(m\). Choose a local coordinate \(z\) on \(X\)
with \(z(p)=0\). By the definition of meromorphic:
\[
f(z) = z^{-m} g(z),
\]
where \(g\) is holomorphic and \(g(0)\neq 0\).

By definition,
\[
F(p) = [1:0] \in \mathbb{CP}^1.
\]

Now we must look at a chart of \(\mathbb{CP}^1\) that contains \([1:0]\). That is:
\[
U_0 = \{[z_0:z_1]\mid z_0\neq 0\},
\]
with coordinate
\[
u = \frac{z_1}{z_0} : U_0\to\mathbb{C},
\]
and in this chart \([1:0]\) corresponds to \(u=0\).

For \(z \neq 0\) near \(p\),
\[
F(z) = [f(z):1] = [z^{-m}g(z):1].
\]

Multiply homogeneous coordinates by \(z^m\) (allowed in projective space):
\[
[z^{-m}g(z):1] = [g(z):z^m].
\]

So in the chart \(U_0\) we have:
\[
u(F(z)) = \frac{z^m}{g(z)}.
\]

Now, check holomorphicity:
\begin{itemize}
	\item \(g(z)\) is holomorphic with \(g(0)\neq 0\) \(\Rightarrow 1/g(z)\) is holomorphic near \(0\).
	\item \(z^m\) is holomorphic.
	\item The product \(z^m \cdot \dfrac{1}{g(z)}\) is holomorphic near \(0\).
\end{itemize}

So
\[
u\circ F(z) = \frac{z^m}{g(z)}
\]
is an ordinary holomorphic function of \(z\) on a neighborhood of \(0\), and it extends to \(z=0\) with value \(0\).

Thus, in local coordinates,
\[
\psi\circ F\circ\varphi^{-1} = u\circ F
\]
is holomorphic at \(z=0\). Therefore, \textbf{\(F\) is holomorphic at the pole \(p\)}.

\bigskip

%-----------------------------------------
\section*{4. Conclusion}

We have checked:
\begin{itemize}
	\item At non-poles: in the chart \(U_1\), \(w\circ F = f\) is holomorphic.
	\item At poles: in the chart \(U_0\), \(u\circ F = z^m/g(z)\) is holomorphic.
\end{itemize}

So at \textbf{every} point \(p\in X\), we can choose charts making the coordinate expression
of \(F\) holomorphic. That’s exactly the definition:
\[
\boxed{F:X\to\mathbb{CP}^1\ \text{is holomorphic.}}
\]

This is why we can safely say:
%\[
%\text{“A meromorphic function on }X\text{ is the same as a holomorphic map }X\to\mathbb{CP}^1.”}
%\]



\newpage
\section{Note 3: The Isomorphism $\mathcal{M}(\CP^1)\simeq\C(x)$}
We explain that the field of meromorphic functions on
\(\CP^1\) is isomorphic to the field \(\C(x)\) of rational functions in
one variable.
\[
\mathcal M(X)
=
\left\{
\,\overline{i\circ f}\in(\mathbb{CP}^1)^X
\;\middle|\;
f \text{ meromorphic on }X
\right\},
\] \[
\mathcal M(X)
=
\{\,F:X\to\mathbb{CP}^1 \mid F \text{ holomorphic}\,\}.
\]

\subsection{Charts on $\CP^1$ and Field of Meromorphic Functions}
View $\CP^1$ as the Riemann sphere. Consider the standard affine chart \[
U_1 = \{[z_0:z_1]\in\mathbb{CP}^1 \mid z_1\neq 0\}
\] with coordinate map \[
\fullfunction{\phi_1}{U_1}{\C}{[z_0:z_1]}{\displaystyle\frac{z_0}{z_1}}.
\]
\begin{figure}[h!]\centering
	\includegraphics[scale=1.5]{tikzs/CP1_chart}
\end{figure}

\medskip\noindent
We write
\[
x := \phi_1,
\]
and think of \(x\) as the \emph{coordinate function} on \(U_1\).
This function extends meromorphically to all of \(\CP^1\), with a simple
pole at \(\infty = [1:0]\).

We define the field of meromorphic functions on \(\CP^1\) as
\[
\M(\CP^1)
=
\{ F:\CP^1\to\CP^1 \mid F \text{ holomorphic}\},
\]
viewing a meromorphic function as a holomorphic map into \(\CP^1\)
(via the usual convention ``finite value \(\mapsto [f(p):1]\), pole
\(\mapsto [1:0]\)'').

On the other hand, the field \(\C(x)\) is
\[
\C(x)
=
\left\{
\frac{p(x)}{q(x)}
\;\middle|\;
p,q \in \C[x],\ q\not\equiv 0
\right\}\Big/\sim,
\]
where \(\frac{p}{q}\sim\frac{p'}{q'}\) if \(p(x)q'(x)=p'(x)q(x)\).


\newpage

\newpage
\medskip\noindent
Here \(\phi_1\) is a biholomorphism between \(U_1\) and \(\mathbb{C}\), its inverse is \[
\fullfunction{\phi_1^{-1}}{\C}{U_1}{z}{[z:1]}.
\]
We’ll write
\[
x := \phi_1
\]
and think of \(x\) as the \emph{coordinate function} on \(U_1\). It extends meromorphically
to all of \(\mathbb{CP}^1\) with a simple pole at \([1:0]\) (the point at infinity).

\bigskip

%-----------------------------------------
\section*{1. Describe both sides with \(\phi_1\)}

\subsection*{Side 1: \(\mathcal{M}(\mathbb{CP}^1)\)}

We use the “holomorphic map to \(\mathbb{CP}^1\)” definition:
\[
\mathcal{M}(\mathbb{CP}^1)
=
\left\{
F:\mathbb{CP}^1\to\mathbb{CP}^1 \ \middle|\ F\ \text{holomorphic}
\right\}.
\]

We want to use \(\phi_1\), so whenever the image of \(F\) lies in \(U_1\), we can look at
\[
\phi_1\circ F : \ (\text{some open set}) \to\mathbb{C}.
\]
That’s just the “affine coordinate” of the value of \(F\).

\subsection*{Side 2: \(\mathbb{C}(x)\)}

\[
\mathbb{C}(x)
=
\left\{
\frac{p(x)}{q(x)}
\ \middle|\
p(x),q(x)\in\mathbb{C}[x],\ q(x)\not\equiv 0
\right\}
\Big/\sim,
\]
where \(\frac{p}{q}\sim\frac{p'}{q'}\) iff \(p(x)q'(x)=p'(x)q(x)\).

Here the symbol \(x\) is exactly your coordinate function
\[
x = \phi_1 : U_1\to\mathbb{C}.
\]

\bigskip

%-----------------------------------------
\section*{2. Map \(\mathbb{C}(x) \to \mathcal{M}(\mathbb{CP}^1)\) using \(\phi_1\)}

Take a rational function
\[
R(x) = \frac{p(x)}{q(x)} \in \mathbb{C}(x).
\]

\noindent\textbf{On the affine chart \(U_1\):}

Given a point \([z_0:z_1]\in U_1\), write
\[
x([z_0:z_1]) = \phi_1([z_0:z_1]) = z_0/z_1 =: z.
\]

We \emph{define} a map \(F_R:\mathbb{CP}^1\to\mathbb{CP}^1\) by saying on \(U_1\),
\[
\phi_1\big(F_R([z_0:z_1])\big) = R\big(\phi_1([z_0:z_1])\big) = R(z).
\]

In other words,
\[
F_R|_{U_1} = \phi_1^{-1}\circ R\circ \phi_1.
\]

Concretely:
\[
F_R([z_0:z_1]) = [R(z_0/z_1):1]
\quad\text{(for }z_1\neq 0,\ R(z)\neq\infty\text{)}.
\]

At points where \(R(z)=\infty\) (i.e.\ \(q(z)=0\)), we set
\[
F_R([z_0:z_1]) = [1:0].
\]

This defines \(F_R\) on \(U_1\cup\{\infty\}\), but one must check it is \emph{holomorphic at \(\infty\)}.
Using homogeneous polynomials is a cleaner way:

\begin{itemize}
	\item Let \(\deg p\le m,\ \deg q\le m\). Define
	\[
	P(z_0,z_1) = z_1^m p(z_0/z_1),\quad
	Q(z_0,z_1) = z_1^m q(z_0/z_1),
	\]
	homogeneous of degree \(m\).
	\item Then set
	\[
	F_R([z_0:z_1]) =
	\begin{cases}
		[P(z_0,z_1):Q(z_0,z_1)], & Q(z_0,z_1)\neq 0,\\[4pt]
		[1:0], & Q(z_0,z_1)=0.
	\end{cases}
	\]
\end{itemize}

This is well-defined and holomorphic on all of \(\mathbb{CP}^1\). In the chart \(U_1\), this is
exactly \(\phi_1^{-1}\circ R\circ\phi_1\).

So we get a map
\[
\Phi:\mathbb{C}(x) \to \mathcal{M}(\mathbb{CP}^1),\quad
R \mapsto F_R.
\]

\bigskip

%-----------------------------------------
\section*{3. Use \(\phi_1\) to go backwards: from \(F\) to \(R(x)\)}

Now take any
\[
F \in \mathcal{M}(\mathbb{CP}^1),
\quad F:\mathbb{CP}^1\to\mathbb{CP}^1\ \text{holomorphic}.
\]

We want to show: \emph{there exists a unique rational function \(R(x)\in\mathbb{C}(x)\) such that}
\[
F = F_R.
\]

Using \(\phi_1\):

\begin{enumerate}
	\item Consider the open set where the image of \(F\) stays inside \(U_1\):
	\[
	V := F^{-1}(U_1) \subset \mathbb{CP}^1.
	\]
	
	\item On \(V\), define
	\[
	f := \phi_1\circ F : V\to\mathbb{C}.
	\]
	
	In local coordinates, \(f\) is holomorphic. So \(f\) is a holomorphic function on the
	Riemann surface \(V\).
	
	\item The complement \(\mathbb{CP}^1\setminus V = F^{-1}(\infty)\) is a \emph{finite set}
	(preimages of the point \([1:0]\) under a holomorphic map from a compact Riemann surface).
	At those points, we’ll see \(f\) has poles. So in the chart \(\phi_1\), \(f\) is a
	\emph{meromorphic function on \(\mathbb{C}\)} with finitely many poles.
\end{enumerate}

Now, via \(\phi_1\), we can identify \(\mathbb{CP}^1\setminus\{\infty\}\) with \(\mathbb{C}\). Under this,
\(F\) becomes a meromorphic function
\[
\tilde f : \mathbb{C}\to\mathbb{C}\cup\{\infty\},
\]
which has only finitely many poles (coming from \(F^{-1}(\infty)\)) and maybe a pole at \(\infty\).

From standard complex analysis:

\begin{quote}
	A meromorphic function on \(\mathbb{CP}^1\) (i.e.\ on \(\mathbb{C}\cup\{\infty\}\)) is \emph{rational}.
\end{quote}

Concretely, we do the principal-part argument \emph{in the coordinate \(\phi_1\)}:

\begin{itemize}
	\item In the \(x\)-coordinate (i.e.\ using \(\phi_1\) as your chart), \(f(x)\) has Laurent expansions
	at each finite pole \(x=a_j\).
	\item You build a rational function \(R(x)\) whose principal parts match those of \(f\) at all
	finite poles and at \(\infty\).
	\item Then \(f(x)-R(x)\) is entire and holomorphic at \(\infty\), so it’s constant. So
	\(f(x)=R(x)+C\), still rational.
\end{itemize}

Thus there exists some \(R(x)\in\mathbb{C}(x)\) such that
\[
f(x) = R(x) \quad\text{as meromorphic functions on }\mathbb{C}\cup\{\infty\}.
\]

But \(f = \phi_1\circ F\) and \(R\circ \phi_1\) have the same values on \(U_1\), so
\[
\phi_1\circ F = R\circ\phi_1 \quad\text{on }U_1,
\]
hence
\[
F|_{U_1} = \phi_1^{-1}\circ R\circ\phi_1 = F_R|_{U_1}.
\]

Both \(F\) and \(F_R\) are holomorphic maps \(\mathbb{CP}^1\to\mathbb{CP}^1\) that agree on the
nonempty open set \(U_1\), so by the identity theorem they agree everywhere:
\[
F = F_R.
\]

So every \(F\in\mathcal{M}(\mathbb{CP}^1)\) comes from a unique \(R\in\mathbb{C}(x)\). That’s surjectivity
and injectivity of \(\Phi\).

\bigskip

%-----------------------------------------
\section*{4. Summary in your language}

Using your chart
\[
\phi_1:U_1\to\mathbb{C},\quad [z_0:z_1]\mapsto z_0/z_1,
\]
we have:

\begin{itemize}
	\item Define \(x:=\phi_1\). This is a meromorphic function on \(\mathbb{CP}^1\) with one pole at \([1:0]\).
	\item Given \(R(x)\in\mathbb{C}(x)\), we define a holomorphic map \(F_R:\mathbb{CP}^1\to\mathbb{CP}^1\) by
	\[
	F_R = \phi_1^{-1}\circ R\circ\phi_1 \quad\text{on }U_1,
	\]
	extended holomorphically to \(\infty\).
	\item Given a holomorphic \(F:\mathbb{CP}^1\to\mathbb{CP}^1\), its coordinate expression
	\[
	f = \phi_1\circ F\circ \phi_1^{-1} : \mathbb{C}\cup\{\infty\}\to\mathbb{C}\cup\{\infty\}
	\]
	is a meromorphic function on the sphere, hence a rational function \(R(x)\). Then \(F=F_R\).
\end{itemize}

So precisely:
\[
\boxed{
	\mathcal{M}(\mathbb{CP}^1)
	=
	\{F:\mathbb{CP}^1\to\mathbb{CP}^1\ \text{holomorphic}\}
	\ \cong\
	\{R(x)\in\mathbb{C}(x)\}
}
\]
and the chart \(\phi_1\) is the bridge that makes this identification explicit.



%	\chapter{Introduction}
%	\input{chapter/mm-chap1}
%	
%	\newpage
%	\chapter{Quadratic Formula and Peano Axiom}
%	\input{chapter/mm-chap2}
%	
%	\newpage
%	\chapter{Functions}
%	\input{chapter/mm-chap3}
%	
%	\newpage
%	\chapter{Group Homomorphism}
%	\input{chapter/mm-chap4}
%	
%	\newpage
%	\chapter{Linear Algebra and Group}
%	\input{chapter/mm-chap5}
%	
%	From the standpoint of solving equations, the algebraic structures we have discussed are interconnected in the following ways:
%	
%	\subsection*{Group}
%	A \textbf{group} provides a foundation for solving equations involving a single operation. The group structure ensures that every element has an inverse, allowing us to "undo" operations and solve equations. For instance, in the group of integers \( (\mathbb{Z}, +) \), the equation \( x + a = b \) can be solved as \( x = b - a \).
%	
%	\subsection*{Ring}
%	A \textbf{ring} extends the concept of a group by introducing a second operation, typically multiplication, in addition to addition. Rings allow us to solve more complex equations that involve both addition and multiplication. For example, solving polynomial equations \( f(x) = 0 \) where \( f(x) \) is a polynomial with coefficients in a ring \( R \).
%	
%	\subsection*{Field}
%	A \textbf{field} is a ring with additional properties that make division possible (except by zero). This structure is crucial for solving linear equations and systems of linear equations. In a field \( F \), any linear equation \( ax = b \) (where \( a \neq 0 \)) can be solved as \( x = a^{-1}b \), where \( a^{-1} \) is the multiplicative inverse of \( a \).
%	
%	\subsection*{Vector Space}
%	A \textbf{vector space} over a field \( F \) is a set of vectors that can be added together and scaled by elements of \( F \). Vector spaces provide a framework for solving linear systems of equations. Solutions to systems of linear equations can be understood as finding vectors \( \mathbf{x} \in V \) such that \( A\mathbf{x} = \mathbf{b} \), where \( A \) is a matrix and \( \mathbf{b} \) is a vector in \( V \).
%	
%	\subsection*{Module}
%	A \textbf{module} is a generalization of vector spaces where the scalars come from a ring instead of a field. Modules allow us to solve equations in contexts where the coefficients are not from a field, such as systems of linear equations with integer coefficients. For example, solving \( A\mathbf{x} = \mathbf{b} \) where \( A \) is a matrix with entries from a ring \( R \) and \( \mathbf{x}, \mathbf{b} \in M \).
%	
%	\subsection*{Algebra}
%	An \textbf{algebra} over a field \( F \) combines the structures of a vector space and a ring. Algebras provide a framework for solving polynomial equations and other equations involving both addition and multiplication of vectors. In an algebra \( A \), we can solve equations like \( x^2 + ax + b = 0 \) using techniques from both linear algebra and ring theory.
%	
%	\subsection*{Summary}
%	The conceptual connection between these structures is rooted in the increasing complexity and capability they offer for solving equations:
%	\begin{itemize}
%		\item \textbf{Groups} provide a way to solve equations with a single operation.
%		\item \textbf{Rings} introduce a second operation, allowing for more complex equations.
%		\item \textbf{Fields} enable division, which is essential for solving linear equations.
%		\item \textbf{Vector spaces} over fields extend these concepts to systems of linear equations.
%		\item \textbf{Modules} generalize vector spaces to allow coefficients from rings.
%		\item \textbf{Algebras} integrate vector space and ring structures, enabling the solution of polynomial and other complex equations.
%	\end{itemize}
%	
%	\newpage
%	\chapter*{LaTex Practice}
%	\input{latex-practice}
%	
%	% Appendix
%	\newpage
%	\appendix
%	\input{appendix/mm-appendix-A}
	
\end{document}
