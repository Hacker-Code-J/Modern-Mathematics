\documentclass[border=10pt]{standalone}
\usepackage{amsmath,amssymb}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}
\usetikzlibrary{arrows.meta}
\usepackage{amsmath}

\begin{document}
\begin{tikzpicture}
	% --- Pre-calculate all values for the new function ---
	% Define the function y = x^3 + 3 * x^2 + 1 and its derivative y' = 3x^2 + 6x
	% Define the function y = (x-1)^3 + 3 * (x-1)^2 + 7 = x^3-3x+9
	% and its derivative y' = 3x^2 -3
	\pgfmathsetmacro{\a}{1.2}              % x-coordinate of point p
	\pgfmathsetmacro{\ay}{\a^3 - 3*\a + 9} % y-coordinate using the new function
	\pgfmathsetmacro{\slope}{3*\a^2 -3} % Slope using the new derivative
	
	\pgfmathsetmacro{\dx}{1}             % Vector x-component (made slightly smaller for visibility)
	\pgfmathsetmacro{\dy}{\slope * \dx}   % Vector y-component
	\pgfmathsetmacro{\endx}{\a + \dx}     % Vector end-point x
	\pgfmathsetmacro{\endy}{\ay + \dy}     % Vector end-point y
	
	% --- Pre-calculate label position for the tangent line ---
	\pgfmathsetmacro{\labelx}{\a + 0.5}
	\pgfmathsetmacro{\labely}{\ay + \slope*(\labelx-\a)}
	
	\begin{axis}[
		axis lines=center,
		xlabel=$x$,xtick=\empty,
		ylabel=$y$,ytick=\empty,
		legend pos=north west,
		xmin=-2.5, xmax=5,   % Adjusted axis limits
		ymin=-5, ymax=20,    % Adjusted axis limits
		clip=false,
		]
		
		% --- Plot the curve y = x^3 + x^2 + 1 ---
		\addplot[domain=-2:2.5, samples=100, thick, red] {(x-1)^3 + 3 * (x-1)^2 + 7};
		\node[right, red] at (axis cs: 2.5, 2.5^3 + -3 *2.5 + 9) {$y=f(x)$};
		\node[right] at (axis cs: 2.5+2, 2.5^3 + -3 *2.5 + 9) {Curve $C\subseteq\mathbb{R}^2$};
		%\addlegendentry{curve $C\subseteq\mathbb{R}^2$};
		
		% --- Plot the tangent line at x=a ---
		\addplot[domain=-1:4, samples=2, blue] {\ay + \slope*(x-\a)};
		\node[right, blue] at (axis cs:4, 3*3^2-16) {$y=f'(x)$};
		\node[right] at (axis cs: 3+4, 3*3^2-16) {Tangent Space $T_pC$};
		%\node[right, rotate=atan(\slope), black!60] at (axis cs: \labelx, \labely) {$T_pC$};
		
		% --- Draw the tangent vector v ---
		\draw[
		-{Stealth},
		thick,
		cyan,
		] (axis cs: \a, \ay) -- (axis cs: \endx, \endy)
		node[right] {$\mathbf{v} = \langle 1, f'(a) \rangle$};
		%node[midway, above, sloped] {$v = \langle dx, (3a^2+2a)dx \rangle$};
		
		% --- Mark the point p ---
		\node[circle, fill=magenta, inner sep=1.5pt, label={above:$\color{magenta}p$}] at (axis cs: \a, \ay) {};
		\draw[dashed, magenta] (\a,\ay) to (\a,0) node[below] {$a$};
		\draw[dashed, magenta] (\a,\ay) to (0,\ay) node[left] {$f(a)$};
		
		\end{axis}
		\end{tikzpicture}
	\end{document}